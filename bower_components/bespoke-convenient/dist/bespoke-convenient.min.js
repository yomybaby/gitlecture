/*! bespoke-convenient v0.3.0 Â© 2013 Joel Purra, Licensed MIT */
!function(a,b,c,d,e,f){"use strict";var g,h=!0,i={logger:{log:function(){b.log.apply(b,arguments)}}},j=function(){var b={};b.logger={},b.logger.log=a.convenientOptions&&a.convenientOptions.logger&&a.convenientOptions.logger.log||i.logger.log,a.convenientOptions=b},k={},l=[],m=function(a){l.some(function(b){return b.deck===a})||l.push({deck:a,storage:{}})},n=function(){},o=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},p=function(){j()};n.builder=function(b){if("string"==typeof b&&(b={pluginName:b}),"string"!=typeof b.pluginName)throw g.generateErrorObject("The plugin name was not properly defined.");b.dependencies=b.dependencies||[],k[b.pluginName]=b;var e={},i="bespoke."+b.pluginName,j=function(a){return new Error(i+": "+a)},l=b.pluginName,p=function(a){return l+"."+a},q=function(a,b,c,d,e,f){return f=f||{},f.eventNamespace=b||null,f.eventName=c||null,f.innerEvent=d||null,o(e)?(f.index=e,f.slide=a.slides[e]):(f.index=a.slides.indexOf(e),f.slide=e),f},r=function(a,b,c,d,e){return a.fire(p(b),q(a,l,b,c,d,e))},s=function(a){return[].slice.call(a,0)},t=function(){var b=[i];a.convenientOptions.logger.log.apply(a.convenientOptions.logger.log,b.concat(s(arguments)))},u=function(){if(d[b.pluginName]!==f)throw g.generateErrorObject("The "+b.pluginName+" plugin has already been loaded, can't load it twice.")},v=function(){b.dependencies.forEach(function(a){if(d[a]===f)throw g.generateErrorObject("The "+b.pluginName+" plugin requires the "+a+" plugin to be loaded.")})},w=function(a){var b=g.getStorage(a);b.activatedPlugins=b.activatedPlugins||[]},x=function(a,b){var d=g.getStorage(b);-1!==d.activatedPlugins.indexOf(a)?g.log("The "+a+" plugin has already been activated for this deck, can't activate it twice. This might indicate a circular plugin dependency, but dependency graph traversal hasn't been implemented into convenient, so maybe not."):(c.plugins[a](b,h),d.activatedPlugins.push(a))},y=function(a,b){var c=g.getStorage(b),d=k[a];d&&d.dependencies.forEach(function(a){-1===c.activatedPlugins.indexOf(a)&&(x(a,b),y(a,b))}),c.activatedPlugins.push(a)},z=function(a){m(a),w(a),y(b.pluginName,a)},A=function(){e.createEventData=q.bind(this),e.generateErrorObject=j.bind(this),e.fire=r.bind(this),e.copyArray=s.bind(this),e.log=t.bind(this),e.activateDeck=z.bind(this),e.getStorage=n.getDeckPluginStorage.bind(this,b.pluginName)},B=function(){u(),v(),A()};return B(),e},n.getDeckStorage=function(a){if(a===f)throw g.generateErrorObject("deck must be defined.");var b=null;return l.forEach(function(c){return c.deck===a?(b=c.storage,!1):void 0}),b},n.getDeckPluginStorage=function(a,b){if(a===f)throw g.generateErrorObject("pluginName must be defined.");var c=n.getDeckStorage(b);return c[a]===f&&(c[a]={}),c[a]},n.createEventData=function(a,b,c,d,e){return e=e||{},e.eventNamespace=a||null,e.eventName=b||null,e.innerEvent=c||null,o(d)?(e.index=d,e.slide=this.slides[d]):(e.index=this.slides.indexOf(d),e.slide=d),e},g=n.builder(e),p(),d[e]=n}(this,console,bespoke,bespoke.plugins,"convenient");